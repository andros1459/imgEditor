/*!
 * imgEditor.js v1.1
 * autor: Andres Espinosa
 * (c) 2019 imgEditor.js Contributors
 * Released under the MIT License
 */
function load_imgEditor(i){if(i.obj)if(""!=i.obj)if(i.file)if(""!=i.file){if(i.circular&&1==i.circular&&$("#imgs_imgEditor").css("border-radius","50%"),i.scala){if(!(i.scala>1))return void console.error("La escala debe ser mayor a 1");scala=i.scala}if(i.tamano){if(i.tamano.width){if(!(i.tamano.width>150))return void console.error("El width debe ser mayor a 150px");max_width=i.tamano.width*(scala/100)}if(i.tamano.height){if(!(i.tamano.height>150))return void console.error("El height debe ser mayor a 150px");max_height=i.tamano.height*(scala/100)}}html="",html+='<div id="preview_list">',html+='<div id="imgEditor_preview" ondragstart="dragStart_imgEditor(event)" ondrag="arras_imgEditor(event)">',html+='<img id="img_imgEditor"/>',html+='<div id="imgs_imgEditor"></div>',html+='<div id="imgEditor_mascara" class="imgEditor_mascara"></div>',html+="</div>",html+="</div>",html+="<hr>",html+='<input id="range" type="text" name="range" value="" onchange="tamano_imgEditor(this.value);">',html+="<div>",html+='<i class="fas fa-image"></i>',html+='<i class="fas fa-image" style="font-size: 40px;float:right;"></i>',html+="</div>",$(i.obj).html(html),$("#range").ionRangeSlider({type:"single",min:0,max:100,from:0,postfix:" %",skin:"big"}),document.getElementById(i.file).onchange=function(i){let t=new FileReader;t.readAsDataURL(i.target.files[0]),t.onload=function(){images=t.result,document.getElementById("img_imgEditor").src=images,document.getElementById("imgs_imgEditor").style.backgroundImage="url("+images+")"}},$("#imgs_imgEditor").css("width",max_width+"px"),$("#imgs_imgEditor").css("height",max_height+"px"),max_width>max_height?($("#imgEditor_preview img").css("height",max_height+"px"),$("#imgEditor_preview img").css("width","auto")):($("#imgEditor_preview img").css("width",max_width+"px"),$("#imgEditor_preview img").css("height","auto"))}else console.error("Debe colcar el id del input file");else console.error("Debe colcar el id del input file");else console.error("Debe colocar el id o la clase del objeto");else console.error("Debe colocar el id o la clase del objeto")}function loadimg_imgEditor(i){document.getElementById("img_imgEditor").src=i,document.getElementById("imgEditor_mascara").style.backgroungImagen=i}function dragStart_imgEditor(i){corX_imgEditor=i.screenX,corY_imgEditor=i.screenY,margin_left_imgEditor=$("#imgEditor_preview img").css("margin-left").replace("px",""),margin_top_imgEditor=$("#imgEditor_preview img").css("margin-top").replace("px",""),width=$("#imgEditor_preview img").width(),height=$("#imgEditor_preview img").height(),posX_imgEditor=$("#imgEditor_preview #imgs_imgEditor").css("background-position-x").replace("px",""),posY_imgEditor=$("#imgEditor_preview #imgs_imgEditor").css("background-position-y").replace("px",""),"50%"==posX_imgEditor&&(posX_imgEditor=-parseInt((width-max_width)/2)),"50%"==posY_imgEditor&&(posY_imgEditor=-parseInt((height-max_height)/2))}function arras_imgEditor(i){i.preventDefault(),0!=i.screenX&&0!=i.screenY&&($("#imgEditor_preview img").css("margin-left",parseInt(margin_left_imgEditor)+(i.screenX-corX_imgEditor)+"px"),$("#imgEditor_preview #imgs_imgEditor").css("background-position-x",parseInt(posX_imgEditor)+(i.screenX-corX_imgEditor)+"px"),$("#imgEditor_preview img").css("margin-top",parseInt(margin_top_imgEditor)+(i.screenY-corY_imgEditor)+"px"),$("#imgEditor_preview #imgs_imgEditor").css("background-position-y",parseInt(posY_imgEditor)+(i.screenY-corY_imgEditor)+"px"),img_editorleft=parseInt(posX_imgEditor)+(i.screenX-corX_imgEditor),img_editortop=parseInt(posY_imgEditor)+(i.screenY-corY_imgEditor))}function tamano_imgEditor(i){0!=imgwidth_imgEditor&&0!=imgheight_imgEditor||(imgwidth_imgEditor=$("#imgEditor_preview img").width(),imgheight_imgEditor=$("#imgEditor_preview img").height()),0==posX_imgEditor&&0==posY_imgEditor&&(width=$("#imgEditor_preview img").width(),height=$("#imgEditor_preview img").height(),posX_imgEditor=$("#imgEditor_preview #imgs_imgEditor").css("background-position-x").replace("px",""),posY_imgEditor=$("#imgEditor_preview #imgs_imgEditor").css("background-position-y").replace("px",""),"50%"==posX_imgEditor&&(posX_imgEditor=-parseInt((width-max_width)/2)),"50%"==posY_imgEditor&&(posY_imgEditor=-parseInt((height-max_height)/2)),$("#imgEditor_preview #imgs_imgEditor").css("background-position-x",parseInt(posX_imgEditor)+"px"),$("#imgEditor_preview #imgs_imgEditor").css("background-position-y",parseInt(posY_imgEditor)+"px")),left=document.getElementById("imgs_imgEditor").offsetLeft,mar_left=$("#imgEditor_preview img").css("margin-left").replace("px",""),posX_imgEditor=parseFloat(left)-parseFloat(mar_left),top=document.getElementById("imgs_imgEditor").offsetTop,mar_top=$("#imgEditor_preview img").css("margin-top").replace("px",""),posY_imgEditor=parseFloat(top)-parseFloat(mar_top),width=parseFloat(imgwidth_imgEditor)*((100+parseInt(i))/100),height=parseFloat(imgheight_imgEditor)*((100+parseInt(i))/100),$("#imgEditor_preview img").width(width),$("#imgEditor_preview img").height(height),$("#imgEditor_preview #imgs_imgEditor").css("background-size",width+"px "+height+"px"),$("#imgEditor_preview #imgs_imgEditor").css("background-position-x",-posX_imgEditor+"px"),$("#imgEditor_preview #imgs_imgEditor").css("background-position-y",-posY_imgEditor+"px"),img_editorleft=posX_imgEditor,img_editortop=posY_imgEditor,img_editorwidth=width,img_editorheight=height}function imgEditor_getData(){return data={width:img_editorwidth,height:img_editorheight,left:img_editorleft,top:img_editortop},data}corX_imgEditor=0,corY_imgEditor=0,margin_left_imgEditor=0,margin_top_imgEditor=0,posX_imgEditor=0,posY_imgEditor=0,imgwidth_imgEditor=0,imgheight_imgEditor=0,max_width=200,max_height=200,scala=100,img_editorwidth=0,img_editorheight=0,img_editorleft=0,img_editortop=0;